<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta charset="utf-8" />
	<title>Lập hóa đơn</title>

	<meta name="description" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

	<!-- bootstrap & fontawesome -->
	<link rel="stylesheet" href="/eas-web/view/assets/css/bootstrap.min.css" />
	<link rel="stylesheet" href="/eas-web/view/assets/font-awesome/4.5.0/css/font-awesome.min.css" />


	<!-- ace styles -->
	<link rel="stylesheet" href="/eas-web/view/assets/css/fonts.googleapis.com.css" />
	<link rel="stylesheet" href="/eas-web/view/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />
	<link rel="stylesheet" href="/eas-web/view/assets/css/ace-skins.min.css" />
	<link rel="stylesheet" href="/eas-web/view/assets/css/ace-rtl.min.css" />
	<!-- auto complete 
	<link rel="stylesheet" href="/eas-web/view/assets/css/angular-material.css" />
	-->

	<!-- angular lib -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-resource.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular-route.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/restangular/1.4.0/restangular.js"></script>
	
	<!-- auto complete 
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-animate.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-aria.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-messages.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.js"></script>
	-->
	<script type="text/javascript" src="createInvoiceController.js"></script>
</head>

<body class="no-skin" ng-app="InvoiceModule" ng-controller="invoiceCtrl">
	<!-- /.navbar-container -->
	<div id="navbar" class="navbar ace-save-state">
		<div class="navbar-container ace-save-state" id="navbar-container">
			<div class="navbar-header pull-left">
				<a href="#" class="navbar-brand">
					<small>
						<i class="fa fa-laptop"></i>
						Siêu thị điện máy
					</small>
				</a>
			</div>
		</div>
	</div>



	<!--menubar-->
	<div id="sidebar" class="sidebar  responsive  ace-save-state">
		<ul class="nav nav-list">
			<li class="">
				<a href="#" class="dropdown-toggle">
					<i class="menu-icon fa fa-users"></i>
					<span class="menu-text">Quản lý nhân sự</span>
					<b class="arrow fa fa-angle-down"></b>
				</a>
				<b class="arrow"></b>

				<ul class="submenu">
					<li class="">
						<a href="/eas-web/eas/employee/employee.html" target="_blank">
							<i class="menu-icon fa fa-caret-right"></i>Hồ sơ nhân viên
						</a>
						<b class="arrow"></b>
					</li>					
				</ul>
			</li>

			<li class="">
				<a href="#" class="dropdown-toggle">
					<i class="menu-icon fa fa-archive"></i>
					<span class="menu-text">
						Quản lý kho </span>
					<b class="arrow fa fa-angle-down"></b>
				</a>
				<b class="arrow"></b>
				<ul class="submenu">
					<li class="">
						<a href="/eas-web/eas/warehouse/Importorder/Importorder.html" target="_blank">
							<i class="menu-icon fa fa-caret-right"></i> Nhập hàng
						</a>
						<b class="arrow"></b>
					</li>
					<li class="">
						<a href="/eas-web/eas/warehouse/Exportorder/Exportorder.html" target="_blank">
							<i class="menu-icon fa fa-caret-right"></i> Xuất hàng
						</a>
						<b class="arrow"></b>
					</li>
					<li class="">
						<a href="/eas-web/eas/warehouse/Statistics/Statistics.html" target="_blank">
							<i class="menu-icon fa fa-caret-right"></i> Thống kê
						</a>
						<b class="arrow"></b>
					</li>
				</ul>
			</li>

			<li class="active open">
				<a href="#" class="dropdown-toggle">
					<i class="menu-icon fa fa-list-alt"></i>
					<span class="menu-text">
						Quản lý đơn hàng </span>
					<b class="arrow fa fa-angle-down"></b>
				</a>
				<b class="arrow"></b>
				<ul class="submenu">
					<li class="">
						<a href="/eas-web/eas/invoice/invoice.html" target="_blank">
							<i class="menu-icon fa fa-caret-right"></i> Quản lý hóa đơn
						</a>
						<b class="arrow"></b>
					</li>
					<li class="active">
						<a href="" target="">
							<i class="menu-icon fa fa-caret-right"></i> Tạo mới hóa đơn
						</a>
						<b class="arrow"></b>
					</li>
				</ul>
			</li>
		</ul>
		<!-- /.nav-list -->
		<div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
			<i id="sidebar-toggle-icon" class="ace-icon fa fa-angle-double-left ace-save-state" data-icon1="ace-icon fa fa-angle-double-left"
			 data-icon2="ace-icon fa fa-angle-double-right"></i>
		</div>
	</div>

	<div class="main-content">
		<div class="main-content-inner">
			<div class="page-content">
				<div class="row">
					<div class="col-xs-12">
						<!-- PAGE CONTENT BEGINS -->
						<div class="space-6"></div>
						<div class="col-sm-10 col-sm-offset-1">
							<div class="widget-box transparent">
								<div class="widget-header widget-header-large">
									<h3 style="color:#337ab7;">
										<b>Hóa đơn bán hàng</b>
									</h3>
								</div>
								<div class="widget-body">
									<form name="form" novalidate ng-submit =" calculateMoney(); saveInvoice()" >
										<div class="widget-main padding-24">
											<div class="row">
												<div class="col-sm-8">
													<div>
														<ul class="list-unstyled  spaced">														
															<li>
																Tên khách hàng
																<input type="text" name="customerName" ng-model="customerName"
 																ng-maxlength="50" ng-pattern="/.*[a-zA-Z]+.*/" required>	
 																<!--  <i class="fa fa-check text-success"
																 ng-show="form.customerName.$dirty && form.customerName.$valid"></i>
																 -->
																<div ng-show="form.customerName.$dirty && form.customerName.$invalid" class="text-danger"> 
																<i class="fa fa-times text-danger"></i> 
																<span ng-show="form.customerName.$error.required"> Tên khách hàng không được bỏ trống </span> 
																<span ng-show="form.customerName.$error.maxlength"> Tên khách hàng phải ngắn hơn 50 kí tự </span> 
																<span ng-show="form.customerName.$error.pattern"> Tên khách hàng chỉ bao gồm các kí tự chữ cái </span> 
																</div> 													
															</li>
															<li>
																Địa chỉ KH
																<input type="text" name="customerAddress" ng-model="customerAddress" 
 																ng-maxlength="50" ng-pattern="/.*[a-zA-Z]+.*/" required style="margin-left: 35px;">											
																<div ng-show="form.customerAddress.$dirty && form.customerAddress.$invalid" class="text-danger"> 
																<i class="fa fa-times text-danger"></i> 
																<span ng-show="form.customerAddress.$error.required"> Địa chỉ không được bỏ trống </span> 
																<span ng-show="form.customerAddress.$error.maxlength"> Địa chỉ phải ngắn hơn 50 kí tự </span> 
																<span ng-show="form.customerAddress.$error.pattern"> Địa chỉ chỉ bao gồm các kí tự chữ cái và số </span> 
																</div> 													
																
															</li>
															<li>
																Điện thoại KH  
													            <input type="text" name="phone" ng-model="customerPhone" ng-minlength="10"
 																ng-maxlength="12" ng-pattern="/^[0-9]+$/" style="margin-left: 13px;">	 																
																<div ng-show="form.phone.$dirty && form.phone.$invalid" class="text-danger"> 
																<i class="fa fa-times text-danger"></i> 
																
																<span ng-show="form.phone.$error.minlength"> Điện thoại phải từ 10 số</span>
																<span ng-show="form.phone.$error.maxlength"> Điện thoại không quá 12 số</span> 														
																<span ng-show="form.phone.$error.pattern"> Điện thoại chỉ bao gồm số nguyên dương </span> 
																</div> 																
															</li>															
														</ul>
													</div>
												</div><!-- /.col -->
											</div><!-- /.row -->																							
										    <div class="space"></div>
										    
											<div class="row">												
												<b>Chi tiết mặt hàng</b>
											</div>
											<br>
											<div class="clearfix">
		                                        <div class="pull-left">
		                                            <div class="dt-buttons btn-overlap btn-group">
		                                                <a class="dt-button buttons-collection buttons-colvis btn btn-white btn-primary btn-bold" title="Thêm mặt hàng" ng-click="showForm()">
		                                                <span><i class="fa fa-plus bigger-110 blue"></i></span>
		                                                </a>
		                                                <a class="dt-button buttons-csv buttons-html5 btn btn-white btn-primary btn-bold" tabindex="0" aria-controls="dynamic-table" title="Xóa mặt hàng" ng-click="removeRow()">
		                                                <span><i class="fa fa-trash-o bigger-110 orange"></i> </span></a>			                                           
		                                            </div>
		                                            <div class="dt-buttons btn-overlap btn-group">                                               
		                                                <a class="dt-button buttons-csv buttons-html5 btn btn-white btn-primary btn-bold" tabindex="0" aria-controls="dynamic-table" title="Tính tiền" ng-click="calculateMoney()">
		                                                <span><i class="fa fa-list-alt bigger-110 blue"></i>
		                                                </span></a>
		                                                 <button type = "submit" class="dt-button buttons-excel buttons-flash btn btn-white btn-primary btn-bold" tabindex="0" aria-controls="dynamic-table" title="Lưu hóa đơn" ng-disabled="!form.$dirty || (form.$dirty && form.$invalid)">
		                                                 <span><i class="fa fa-floppy-o bigger-110 green"></i> 
		                                                 </span></button>
		                                                <a class="dt-button buttons-excel buttons-flash btn btn-white btn-primary btn-bold" tabindex="0" aria-controls="dynamic-table" title="In hóa đơn" ng-click="printInvoice()">
		                                                <span><i class="fa fa-print bigger-110 green"></i> 
		                                               </span></a>	                                              
		                                            </div>                                          
		                                        </div>
		                                    </div>
		                                    <br>
		                                    
		 									<!-- bang chi tiet hoa don -->
											<div>
												<table class="table table-striped table-bordered" id="dynamic-table">
													<thead>
						                                <tr>
						                                	<th class="center">#</th>				                     
						                                    <th>Mã SP</th>
						                                    <th>Mô tả</th>
						                                    <th>Số lượng</th>
						                                    <th>Đơn giá</th>
						                                    <th>ĐV tính</th>
						                                    <th>Tỉ lệ CK</th>
						                                    <th>Tiền CK</th>
						                                    <th>Thành tiền</th>				                           
						                                </tr>
						                            </thead>
													<tbody>
														<tr ng-repeat="product in products"> 
						                                    <td class="center">
		                                                        <input type="checkbox" ng-model="product.isSelected" value={{product.prId}}>
		                                                    </td>               
						                                    <td>{{product.prId}}</td>
						                                    <td>{{product.prName}}</td>
						                                    <td>{{product.number}}</td>
						                                    <td>{{product.price}}</td>
						                                    <td>{{product.prUnit}}</td>
						                                    <td>{{product.discountRate}}</td>
						                                    <td>{{product.quantity*product.price*product.discountRate}}</td>
						                                    <td>{{product.number*(product.price*(1-product.discountRate))}}</td>			
						                                </tr>													
													</tbody>
												</table>
											</div>
											<div class="hr hr8 hr-double hr-dotted"></div>
											<div class="row">
												<div class="col-sm-5 pull-right">
													<h4 class="pull-right">
														Tổng tiền :   
														<span class="red" ng-model="totalAmount">{{totalAmount}} VNĐ</span>
													</h4>
												</div>														
											</div>													
										</div>				
									</form>												
								
								<!--Them san pham vao hoa don-->
									<div ng-show="formAddProduct">
										<form class="form-horizontal" role="form" ng-submit="addRow(productId,number)" name="myForm" novalidate>
											<div class="form-group">
												<label class="col-sm-3 control-label no-padding-right" for="form-field-1">Mã hàng:
												</label>
												<div class="col-sm-9">
													<input type="number" id="form-field-1" class="col-xs-10 col-sm-5" ng-model="productId" name="productId" name="productId" ng-minlength="1" ng-maxlength="4" ng-pattern="/^[0-9]+$/" required/>
													<div ng-show="myForm.productId.$dirty && myForm.productId.$invalid" class="text-danger"> 
													<i class="fa fa-times text-danger"></i> 					
													<span ng-show="myForm.productId.$error.maxlength"> Mã hàng không quá 4 chữ số</span> 														
													<span ng-show="myForm.productId.$error.pattern"> Mã hàng chỉ bao gồm số nguyên dương </span> 																							
												</div> 		
												</div>
												
											</div>

											<div class="form-group">
												<label class="col-sm-3 control-label no-padding-right" for="form-field-1">Số lượng:
												</label>

												<div class="col-sm-9">
													<input type="number" id="form-field-1" class="col-xs-10 col-sm-5" ng-model="number" name="number" ng-minlength="1" ng-maxlength="2" ng-pattern="/^[0-9]+$/" required/>
													<div ng-show="myForm.number.$dirty && myForm.number.$invalid" class="text-danger">
												
												<i class="fa fa-times text-danger"></i>		
																					
												<span ng-show="myForm.number.$error.maxlength"> Số lượng không quá 2 chữ số</span> 														
												<span ng-show="myForm.number.$error.pattern"> Số lượng phải là số nguyên dương </span> 
											</div> 	
												</div>
											</div>
											
											<div class="form-group">
												<label class="col-sm-3 control-label no-padding-right" for="form-field-1">
												</label>
												<div class="col-sm-9">
													<button class="btn btn-white btn-info btn-bold" type="submit" ng-disabled="!myForm.$dirty || (myForm.$dirty && myForm.$invalid)">Thêm</button>
												</div>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="/eas-web/view/assets/js/jquery-2.1.4.min.js"></script>
	
	<script src="/eas-web/view/assets/js/bootstrap.min.js"></script>
	<script src="/eas-web/view/assets/js/ace-elements.min.js"></script>
	<script src="/eas-web/view/assets/js/ace.min.js"></script>
</body>

</html>